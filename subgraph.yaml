specVersion: 1.0.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: FolioDeployer
    network: base
    source:
      address: "0xF15BE15D944E73a47C7810CfdD0Adf6c5370B726"
      abi: FolioDeployer
      startBlock: 24865810
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - DTF
        - Token
        - Governance
        - GovernanceTimelock
      abis:
        - name: FolioDeployer
          file: ./abis/folio-deployer.json
        - name: ERC20
          file: ./abis/erc20.json
        - name: Governor
          file: ./abis/governor.json
        - name: Timelock
          file: ./abis/timelock.json
      eventHandlers:
        - event: FolioDeployed(indexed address,indexed address,address)
          handler: handleFolioDeployed
        - event: GovernedFolioDeployed(indexed address,indexed address,address,address,address,address)
          handler: handleGovernedFolioDeployed
      file: ./src/deploy/mappings.ts
  - kind: ethereum
    name: GovernanceDeployer
    network: base
    source:
      address: "0x85546cc9Ac4ecC2443875d19429A9B209c53D994"
      abi: GovernanceDeployer
      startBlock: 24865810
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - DAORegistry
        - Token
      abis:
        - name: ERC20
          file: ./abis/erc20.json
        - name: GovernanceDeployer
          file: ./abis/governance-deployer.json
      eventHandlers:
        - event: DeployedGovernedStakingToken(indexed address,indexed address,address,address)
          handler: handleDeployedGovernedStakingToken
      file: ./src/deploy/mappings.ts
templates:
  - name: DTF
    kind: ethereum/contract
    network: base
    source:
      abi: DTF
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Trade
      abis:
        - name: DTF
          file: ./abis/dtf.json
        - name: ERC20
          file: ./abis/erc20.json
      eventHandlers:
        - event: TradeApproved(indexed uint256,indexed address,indexed address,(uint256,address,address,(uint256,uint256,uint256),(uint256,uint256,uint256),(uint256,uint256),uint256,uint256,uint256,uint256,uint256))
          handler: handleTradeApproved
        - event: TradeOpened(indexed uint256,(uint256,address,address,(uint256,uint256,uint256),(uint256,uint256,uint256),(uint256,uint256),uint256,uint256,uint256,uint256,uint256))
          handler: handleTradeLaunched
        - event: TradeKilled(indexed uint256)
          handler: handleTradeKilled
        - event: TradeBid(indexed uint256,uint256,uint256)
          handler: handleBid
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: FolioFeePaid(indexed address,uint256)
          handler: handleFolioFeePaid
        - event: ProtocolFeePaid(indexed address,uint256)
          handler: handleProtocolFeePaid
      file: ./src/dtf/mappings.ts
  - name: StakingToken
    kind: ethereum/contract
    network: base
    source:
      abi: StakingVault
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - StakingToken
        - Delegate
        - Token
        - Account
        - AccountBalance
      abis:
        - name: StakingVault
          file: ./abis/staking-vault.json
        - name: ERC20
          file: ./abis/erc20.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
      file: ./src/staking-token/mappings.ts
  - name: Governance
    kind: ethereum/contract
    network: base
    source:
      abi: Governor
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - StakingToken
        - Token
        - Governance
        - GovernanceTimelock
        - Proposal
        - Vote
        - AccountBalance
        - Delegate
      abis:
        - name: Governor
          file: ./abis/governor.json
        - name: Timelock
          file: ./abis/timelock.json
      eventHandlers:
        - event: ProposalCanceled(uint256)
          handler: handleProposalCanceled
        - event: ProposalCreated(uint256,address,address[],uint256[],string[],bytes[],uint256,uint256,string)
          handler: handleProposalCreated
        - event: ProposalExecuted(uint256)
          handler: handleProposalExecuted
        - event: ProposalQueued(uint256,uint256)
          handler: handleProposalQueued
        - event: ProposalThresholdSet(uint256,uint256)
          handler: handleProposalThresholdSet
        - event: QuorumNumeratorUpdated(uint256,uint256)
          handler: handleQuorumNumeratorUpdated
        - event: VoteCast(indexed address,uint256,uint8,uint256,string)
          handler: handleVoteCast
        - event: VotingDelaySet(uint256,uint256)
          handler: handleVotingDelaySet
        - event: VotingPeriodSet(uint256,uint256)
          handler: handleVotingPeriodSet
      file: ./src/governance/mappings.ts
  - name: Timelock
    kind: ethereum/contract
    network: base
    source:
      abi: Timelock
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - GovernanceTimelock
      abis:
        - name: Timelock
          file: ./abis/timelock.json
      eventHandlers:
        - event: RoleGranted(indexed bytes32,indexed address,indexed address)
          handler: handleTimelockRoleGranted
        - event: RoleRevoked(indexed bytes32,indexed address,indexed address)
          handler: handleTimelockRoleRevoked
        - event: MinDelayChange(uint256,uint256)
          handler: handleTimelockMinDelayChange
      file: ./src/governance/mappings.ts
