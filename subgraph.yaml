specVersion: 1.0.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: FolioDeployer
    network: base
    source:
      address: "0xF15BE15D944E73a47C7810CfdD0Adf6c5370B726"
      abi: FolioDeployer
      startBlock: 24865810
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Folio
        - Token
      abis:
        - name: FolioDeployer
          file: ./abis/folio-deployer.json
        - name: ERC20
          file: ./abis/erc20.json
      eventHandlers:
        - event: FolioDeployed(indexed address,indexed address,address)
          handler: handleFolioDeployed
        - event: GovernedFolioDeployed(indexed address,indexed address,address,address,address,address)
          handler: handleGovernedFolioDeployed
      file: ./src/deploy/mappings.ts
  - kind: ethereum
    name: GovernanceDeployer
    network: base
    source:
      address: "0x85546cc9Ac4ecC2443875d19429A9B209c53D994"
      abi: GovernanceDeployer
      startBlock: 24865810
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - DAORegistry
      abis:
        - name: erc20
          file: ./abis/erc20.json
        - name: GovernanceDeployer
          file: ./abis/governance-deployer.json
      eventHandlers:
        - event: DeployedGovernedStakingToken(indexed address,indexed address,address,address)
          handler: handleDeployedGovernedStakingToken
      file: ./src/deploy/mappings.ts
templates:
  - name: Token
    kind: ethereum/contract
    network: base
    source:
      abi: erc20
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      file: ./src/token/mappings.ts
      entities:
        - TransferEvent
      abis:
        - name: erc20
          file: ./abis/erc20.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
